---
layout: post
title:  "Mount fstab"
date:   2024-08-03 12:15:00 -0400
categories: linux mount fstab
---

1. Создайте файл с авторизационными данными:

``# nano /root/.smbuser``

username=имя_пользователя
password=пароль_пользователя
domain=ДОМЕН

Для безопасности ограничьте доступ к файлу с указанными данными:

``# chmod 400 /root/.smbuser``

2. Для подключения сетевой директории впишите в конец файла /etc/fstab её параметры.

Откройте его в текстовом редакторе:

``# nano /etc/fstab``

Синтаксис строки подключения для windows или samba-ресурсов следующий.

``//<адрес_сервера>/<имя_сетевого_каталога> <каталог_для_монтирования> cifs credentials=<путь_до_файла_с_авторизационными_данными>,iocharset=utf8,file_mode=0777,dir_mode=0777 0 0``

При подключении используйте свои параметры.

В случае возникновения ошибки при монтировании общего ресурса, который находится на ПК с ОС Windows, нужно добавить в строку подключения следующий параметр:

``vers=1.0``

Пример:

``//windows_pc/common /mnt/common/ cifs credentials=/root/.smbuser,vers=1.0,iocharset=utf8,file_mode=0777,dir_mode=0777 0 0``

3. Создайте каталог, куда будет монтироваться папка и назначьте ей права.

``# mkdir /mnt/common``
``# chmod 777 /mnt/common``
Для удобства, можете создать ярлык каталога на рабочем столе, для этого выполните нижеследующую команду, вписав имя своего пользователя.

``ln -s /mnt/common/ /home/<имя_пользователя>/Рабочий\ стол/Общая``

4. Выполните монтирование каталога

``mount -a``

Важно!
В некоторых случаях, при загрузке компьютера монтирование происходит быстрее получения IP-адреса, тем самым, монтирование не происходит. Связано это с особенностями конфигурации сети. Для предотвращения подобных случаев можно вписать команду монтирования в файл /etc/gdm/PreSession/Default. Тогда монтирование будет происходить при входе пользователей в систему.

Откройте файл /etc/gdm/PreSession/Default и впишите в конец строку монтирования, после неё переведите курсор на новую строку и сохраните.

``# nano /etc/gdm/PreSession/Default``
…

``mount -a &``

Важно!
При подключении сетевой папки на windows server 2003 в опции монтирования надо дописать параметр vers=1.0, а так же логин и пароль не должны содержать кириллических символов.
